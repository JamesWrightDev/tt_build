(function(t){function e(e){for(var s,a,c=e[0],o=e[1],l=e[2],d=0,p=[];d<c.length;d++)a=c[d],n[a]&&p.push(n[a][0]),n[a]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],s=!0,c=1;c<r.length;c++){var o=r[c];0!==n[o]&&(s=!1)}s&&(i.splice(e--,1),t=a(a.s=r[0]))}return t}var s={},n={app:0},i=[];function a(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=s,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"2aff":function(t,e,r){"use strict";var s=r("80c6"),n=r.n(s);n.a},"51f2":function(t,e,r){t.exports=r.p+"img/search.9e1fa7f6.svg"},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var s=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("div",{staticClass:"container"},[t._m(0),r("div",{staticClass:"grid__row centered mb-3"},[r("div",{staticClass:"grid__col--8"},[r("auto-complete",{attrs:{cities:this.cities}})],1)]),this.error?r("div",{staticClass:"grid__row"},[r("div",{staticClass:"grid__col--12"},[r("h3",{staticClass:"headline--secondary__error"},[t._v("Error: "+t._s(this.error_content))])])]):t._e(),this.results.length>0?r("div",{staticClass:"grid__row centered"},[r("div",{staticClass:"grid__col--11"},t._l(this.results,function(t,e){return r("result-card",{key:e,attrs:{i:e,update:t.updated,place:t.location,city:t.city,values:t.measurements}})}),1)]):t._e()])])},i=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"grid__row mb-3 mt-3"},[r("div",{staticClass:"grid__col--12"},[r("div",[r("h1",{staticClass:"headline--primary"},[t._v("Compare your Air")]),r("h3",{staticClass:"headline--secondary"},[t._v("Compare the air quality between cities in the UK.")]),r("h3",{staticClass:"headline--secondary"},[t._v("Select cities to compare using the search tool below.")])])])])}],a=(r("ac6a"),r("bc3a")),c=r.n(a),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search__wrapper"},[s("div",{staticClass:"search__container"},[s("img",{staticClass:"search__icon",attrs:{src:r("51f2"),alt:""}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"search__input",attrs:{type:"text",placeholder:"Enter city name..."},domProps:{value:t.query},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?t.up(e):null},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?t.down(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.itemClicked(t.selected)}],input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t.matches?s("div",{directives:[{name:"show",rawName:"v-show",value:t.matches.length>0,expression:"matches.length > 0"}],ref:"searchOptions",staticClass:"search__options"},[s("ul",t._l(t.matches,function(e,r){return s("li",{key:e,staticClass:"search__listitem",class:{"search__listitem--selected":t.selected==r},domProps:{textContent:t._s(e)},on:{click:function(e){t.itemClicked(r)}}})}),0)]):t._e()])},l=[],u=(r("f559"),new s["a"]),d=u,p={props:["cities"],data:function(){return{visable:!1,selected:null,query:""}},methods:{itemClicked:function(t){this.matches[t]&&(d.$emit("searchCity",this.matches[t]),this.query="",this.selected=0)},up:function(){this.selected<=0||(this.selected--,this.scrollToItem())},down:function(){this.selected!==this.matches.length-1&&(this.selected++,this.scrollToItem())},scrollToItem:function(){this.$refs.searchOptions.scrollTop=32*this.selected}},computed:{matches:function(){var t=this;return""==this.query?[]:(this.selected=0,this.cities.filter(function(e){return e.toLowerCase().startsWith(t.query.toLowerCase())}))}}},f=p,h=(r("2aff"),r("2877")),_=Object(h["a"])(f,o,l,!1,null,"a24b62c2",null);_.options.__file="AutoComplete.vue";var v=_.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("div",{staticClass:"card__icon--delete"},[s("img",{attrs:{src:r("f687"),alt:""},on:{click:function(e){t.itemClicked(t.i)}}})]),s("div",[s("h5",{staticClass:"card__text--secondary"},[t._v("Updated "+t._s(t._f("moment")(t.update,"from","now")))]),s("h4",{staticClass:"card__text--primary"},[t._v(t._s(t.place))]),s("p",[t._v("in "+t._s(t.city)+", United Kingdom")]),s("div",{staticClass:"card__values"},[s("ul",[s("li",{staticClass:"card__values--title"},[t._v("Values:")]),t._l(t.values,function(e,r){return s("li",{key:r,staticClass:"card__values--stats"},[t._v("\n                    "+t._s(e.parameter)+": "+t._s(Math.round(e.value))+"\n                ")])})],2)])])])},y=[],C={data:function(){return{}},props:["place","city","update","values","i"],methods:{itemClicked:function(t){d.$emit("removeCity",t)}}},b=C,g=(r("83b9"),Object(h["a"])(b,m,y,!1,null,"46b2e394",null));g.options.__file="ResultCard.vue";var w=g.exports,k={name:"app",components:{AutoComplete:v,ResultCard:w},data:function(){return{cities:[],results:[],error:!1,error_content:""}},methods:{searchCity:function(t){var e=this;c.a.get("https://api.openaq.org/v1/latest/",{params:{city:t}}).then(function(t){e.error=!1;var r=t.data.results[0];e.results.unshift({location:r.location,city:r.city,updated:r.measurements[0].lastUpdated,measurements:r.measurements})}).catch(function(){e.error=!0,e.error_content="There is no data avalible for that city."})},removeCity:function(t){this.results.splice(t,1)}},mounted:function(){var t=this;c.a.get("https://api.openaq.org/v1/cities/",{params:{country:"GB",limit:500}}).then(function(e){t.error=!1;var r=e.data.results,s=[];r.forEach(function(t){s.push(t.city)}),t.cities=s}).catch(function(){t.error=!0,t.error_content="Services are currently unavailable"}),d.$on("searchCity",function(e){t.searchCity(e)}),d.$on("removeCity",function(e){t.removeCity(e)})}},x=k,O=(r("5c0b"),Object(h["a"])(x,n,i,!1,null,null,null));O.options.__file="App.vue";var j=O.exports;s["a"].config.productionTip=!1,s["a"].use(r("2ead")),new s["a"]({render:function(t){return t(j)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var s=r("8fba"),n=r.n(s);n.a},"80c6":function(t,e,r){},"83b9":function(t,e,r){"use strict";var s=r("edba"),n=r.n(s);n.a},"8fba":function(t,e,r){},edba:function(t,e,r){},f687:function(t,e,r){t.exports=r.p+"img/cancel.e85191c6.svg"}});
//# sourceMappingURL=app.9f26c971.js.map